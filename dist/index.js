"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");exports.useShortcutRecorder=function(t){var n=void 0===t?{}:t,r=n.onChange,o=void 0===r?function(){}:r,i=n.keyFormatter,u=void 0===i?function(e){return e.join(" + ")}:i,a=n.maxKeys,c=void 0===a?4:a;(c>4||c<1)&&(c=4);var d=e.useState([]),f=d[0],s=d[1],v=e.useState([]),l=v[0],y=v[1],m=e.useState(!1),h=m[0],S=m[1],k=e.useState(""),p=k[0],g=k[1],E=e.useState(new Set),w=E[0],x=E[1],K=["Control","Shift","Alt","Meta"],L=function(e){return K.includes(e)},M=function(){s([]),x(new Set)},R=function(e){if(0!==e.size){var t=[];K.forEach((function(n){e.has(n)&&t.push(n)})),Array.from(e).forEach((function(e){L(e)||t.push(e)})),s(t)}else M()},C=function(e){if(!e||0===e.length)return!1;if(e.length>c)return g("Maximum ".concat(c," keys allowed")),!1;if(1!==e.filter((function(e){return!L(e)})).length)return g("Shortcut must contain exactly one non-modifier key"),!1;var t=e[e.length-1];return L(t)?(g("Last key must be a non-modifier key"),!1):(g(""),!0)},A=function(){S(!0),g(""),M()},b=function(){S(!1),g("")},j={onFocus:A,onClick:A,onBlur:function(){b(),M()},value:u(h?f:l),readOnly:!0};return e.useEffect((function(){var e=function(e){h&&function(e){if(h){e.preventDefault();var t=e.key;if("Escape"===t)return S(!1),void M();var n=new Set;if(n.add(t),e.ctrlKey&&n.add("Control"),e.shiftKey&&n.add("Shift"),e.altKey&&n.add("Alt"),e.metaKey&&n.add("Meta"),n.size>c){var r="Maximum ".concat(c," keys allowed");return g(r),void M()}x(n),R(n)}}(e)},t=function(e){h&&function(e){if(h){var t=e.key;if("Escape"!==t){var n=new Set(w);n.delete(t);var r=!L(t);x(n),r&&f.length>0?C(f)?(o(f),y(f),S(!1)):M():R(n)}}}(e)};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[h,w,f,p]),{savedShortcut:l,isRecording:h,error:p,startRecording:A,stopRecording:b,resetRecording:M,inputProps:j}};
//# sourceMappingURL=index.js.map
