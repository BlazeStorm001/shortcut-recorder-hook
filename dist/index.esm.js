import{useState as e,useEffect as n}from"react";var t=function(t){var r=void 0===t?{}:t,o=r.onChange,i=void 0===o?function(){}:o,u=r.keyFormatter,a=void 0===u?function(e){return e.join(" + ")}:u,c=r.maxKeys,f=void 0===c?4:c;(f>4||f<1)&&(f=4);var d=e([]),s=d[0],v=d[1],l=e([]),m=l[0],y=l[1],h=e(!1),k=h[0],p=h[1],g=e(""),w=g[0],E=g[1],S=e(new Set),x=S[0],K=S[1],L=["Control","Shift","Alt","Meta"],C=function(e){return L.includes(e)},M=function(){v([]),K(new Set)},R=function(e){if(0!==e.size){var n=[];L.forEach((function(t){e.has(t)&&n.push(t)})),Array.from(e).forEach((function(e){C(e)||n.push(e)})),v(n)}else M()},A=function(e){if(!e||0===e.length)return!1;if(e.length>f)return E("Maximum ".concat(f," keys allowed")),!1;if(1!==e.filter((function(e){return!C(e)})).length)return E("Shortcut must contain exactly one non-modifier key"),!1;var n=e[e.length-1];return C(n)?(E("Last key must be a non-modifier key"),!1):(E(""),!0)},z=function(){p(!0),E(""),M()},F=function(){p(!1),E("")},b={onFocus:z,onClick:z,onBlur:function(){F(),M()},value:a(k?s:m),readOnly:!0};return n((function(){var e=function(e){k&&function(e){if(k){e.preventDefault();var n=e.key;if("Escape"===n)return p(!1),void M();var t=new Set;if(t.add(n),e.ctrlKey&&t.add("Control"),e.shiftKey&&t.add("Shift"),e.altKey&&t.add("Alt"),e.metaKey&&t.add("Meta"),t.size>f){var r="Maximum ".concat(f," keys allowed");return E(r),void M()}K(t),R(t)}}(e)},n=function(e){k&&function(e){if(k){var n=e.key;if("Escape"!==n){var t=new Set(x);t.delete(n);var r=!C(n);K(t),r&&s.length>0?A(s)?(i(s),y(s),p(!1)):M():R(t)}}}(e)};return document.addEventListener("keydown",e),document.addEventListener("keyup",n),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",n)}}),[k,x,s,w]),{savedShortcut:m,isRecording:k,error:w,startRecording:z,stopRecording:F,resetRecording:M,inputProps:b}};export{t as useShortcutRecorder};
//# sourceMappingURL=index.esm.js.map
